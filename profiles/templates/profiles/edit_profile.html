{% extends "layout.html" %}
{% load static from staticfiles %}

{% block title_tag %}Edit | {{ profile.user.username }}{% endblock %}

{% block header %}Edit Profile{% endblock %}

{% block content %}

    <div class="block-20px"></div>

    <div class="w-container">
        <div class="w-row">
            <div class="w-col col-md-10 col-md-offset-1">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div style="display:block;height:30px;"></div>
                        <form method="POST" class="form-horizontal" enctype=multipart/form-data action="{% url 'profiles:editprofile' profile.pk %}">
                            {% csrf_token %}
                            <!-- GAMBAR PROFIL -->
                            <div class="panel-body">
                              <div class="w-row">
                                 <div class="col-xs-12">
                                       <div id="avatar" class="background" style="background: url('{{ profile.avatar.url }}')
                                        scroll center / cover #ccc; height: 150px; width:150px;border-radius: 50%; margin:auto">
                                        </div>
                                </div>
                              </div>
                              <div class="col-xs-12 profil">
                                    <div style="display:block;height:20px;"></div>
                                    <div> {{ profile_form.avatar }} </div>
                                    <div id="edit_ava_label">Max 2Mb</div>
                              </div>
                            </div>
                            <!-- TENTANG SAYA -->
                            <div class="form-group">
                                <label class="col-md-4 control-label">
                                    Bio
                                </label>
                                <div class="col-md-6">
                                    {{ profile_form.bio }}
                                </div>
                                <div class="col-md-6">
                                    {{ profile_form.bio.errors }}
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">
                                    Fullname
                                </label>
                                <div class="col-md-6">
                                    {{ user_form.fullname }}
                                </div>
                                <div class="col-md-6">
                                    {{ user_form.fullname.errors }}
                                </div>
                            </div>
                            <!--div class="form-group">
                                <label class="col-md-4 control-label">
                                    Username
                                </label>
                                <div class="col-md-6">
                                    {{ user_form.username }}
                                </div>
                                <div class="col-md-6">
                                    {{ user_form.username.errors }}
                                </div>
                            </div-->
                            <div class="form-group">
                                <label class="col-md-4 control-label">
                                    Institution
                                </label>
                                <div class="col-md-6">
                                    {{ user_form.institution }}
                                </div>
                                <div class="col-md-6">
                                    {{ user_form.institution.errors }}
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label">
                                    Phone Number
                                </label>
                                <div class="col-md-6">
                                    {{ user_form.phone_number }}
                                </div>
                                <div class="col-md-6">
                                    {{ user_form.phone_number.errors }}
                                </div>
                            </div>
                            <!--div class="form-group">
                                <label class="col-md-4 control-label">
                                    Card Id
                                </label>
                                <div class="col-md-6">
                                </div>
                                <div class="col-md-6">
                                </div>
                            </div -->
                             <div class="form-group">
                                <div class="col-md-6 col-md-offset-4">
                                    <input type="submit" value="SAVE" class="card-btn-submit">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
</div>
{% endblock %}

{% block js %}
<script>
    $("#id_avatar").change(function (){
        if ($("#id_avatar").prop('files') && $("#id_avatar").prop('files')[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#avatar').css('background', 'url(' + e.target.result + ')');
                $('#avatar').css('background-size', 'contain');
            };

            reader.readAsDataURL($("#id_avatar").prop('files')[0]);
        }
    });
</script>

{% endblock %}

